id: 108
pagetitle: 'Using XRouting for multilingual websites in MODX'
alias: 2015/05/using-xrouting-for-multilingual-websites-in-modx
published: 1
parent: 1
introtext: '<p>In this tutorial you''ll learn how you can use XRouting in MODX projects with multiple contexts to route users to the correct context based on the domain or subfolder.</p>'
template: 2
menuindex: 20
createdby: 1
publishedon: 1430809200
uri: posts/2015/05/using-xrouting-for-multilingual-websites-in-modx
show_in_tree: 0
properties: '{"contentblocks":{"content":"[{\"layout\":3,\"content\":{\"col1\":[{\"value\":\"<p><a href=\\\"http:\/\/modx.com\/extras\/package\/xrouting\\\" target=\\\"_blank\\\">XRouting<\/a> is a simple plugin that handles requests for different contexts in MODX. It automatically switches the context based on a (sub)domain or subfolder.&nbsp;<a href=\\\"http:\/\/modx.com\/extras\/package\/contextrouter\\\" target=\\\"_blank\\\">ContextRouter<\/a> or&nbsp;<a href=\\\"http:\/\/modx.com\/extras\/package\/gatewaymanager\\\" target=\\\"_blank\\\">GatewayManager<\/a> are similar extras, but neither of them can handle the&nbsp;routing based on domains and folders at the same time.&nbsp;In this tutorial you''ll learn how you can setup XRouting for&nbsp;a multilingual website with subfolders for each language.<\/p><p>XRouting is available for free and&nbsp;can be installed through the MODX Package Management or downloaded&nbsp;<a href=\\\"http:\/\/modx.com\/extras\/package\/xrouting\\\" target=\\\"_blank\\\">here<\/a>.<\/p>\",\"field\":2,\"settings\":[]},{\"value\":\"How XRouting works\\t\",\"level\":\"h2\",\"field\":3,\"settings\":[]},{\"value\":\"<p>XRouting uses context settings for it''s routing. That''s why you should add at least the <em>http_host<\/em>, <em>base_url<\/em> and <em>site_url<\/em> context settings to each context. To make your multilingual website actually work you should also add context&nbsp;settings like <em>cultureKey<\/em>, <em>site_start<\/em> and <em>error_page<\/em>.<\/p>\",\"field\":2,\"settings\":[]}]},\"settings\":[],\"parent\":0},{\"layout\":4,\"content\":{\"col1\":[{\"value\":\"<p>Assuming that you''re creating a website that is translated into English, French and German, with a single domain and a subfolder for each language \u2013 so the English website would be available under http:\/\/company.org\/en\/. In that case you should leave the default web context and create a new context for each language.<\/p><p>Please make sure that each context contains at least 1 Resource that is set as <em>site_start<\/em> in the context settings.<\/p><p>At this point your resource tree should look similar to the one in this image.<\/p>\",\"field\":2,\"settings\":[]}],\"col2\":[{\"url\":\"\/assets\/uploads\/images\/2015\/05\/xrouting_tree.png\",\"title\":\"\",\"size\":\"33562\",\"extension\":\"png\",\"field\":4,\"settings\":{\"class\":\"extended-width\",\"style\":\"\",\"classnames\":\"no-margin-top\"}}]},\"settings\":{\"layout_attributes\":\"\",\"layout_padding_top\":\" \",\"layout_padding_bottom\":\" \",\"layout_classes\":\"\",\"col1_classes\":\"medium-6 small-12 medium-push-6\",\"col2_classes\":\"medium-6 small-12 medium-pull-6\",\"outer_classes\":\"[[++default_article_column_classnames]]\"},\"parent\":0},{\"layout\":3,\"content\":{\"col1\":[{\"value\":\"About the context settings\",\"level\":\"h2\",\"field\":3,\"settings\":[]},{\"value\":\"<p>To understand the context settings you should first make sure to know the anatomy of a URL. The image below shows which part is the protocol, the hostname and the path.<\/p>\",\"field\":2,\"settings\":[]},{\"url\":\"\/assets\/uploads\/images\/2015\/05\/xrouting_url_anatomy.jpg\",\"title\":\"\",\"size\":\"6768\",\"extension\":\"jpg\",\"field\":4,\"settings\":{\"class\":\"none\",\"classnames\":\"\",\"style\":\"width:auto;\",\"linked\":\"0\"}},{\"value\":\"<p>\\n\\tBased on this it''s pretty straight forward to set the MODX context settings for XRouting. The <em>http_host<\/em>&nbsp;setting&nbsp;is just the hostname (Important: when used with XRouting always remove the \\\"www.\\\" because it''s added automatically). The <em>base_url<\/em> setting is your base path of your website. For a normal project this would just be single slash. In the case of a multilingual website with subfolders for each language, it''s the name of the subfolder. Make sure your <em>base_path<\/em> settings starts and ends with a slash! The <em>site_url<\/em> setting in MODX is just the combination of the default&nbsp;protocol, the <em>http_host<\/em> setting and the <em>base_url<\/em> setting.<\/p>\",\"field\":2,\"settings\":[]}]},\"settings\":[],\"parent\":0},{\"layout\":3,\"content\":{\"col1\":[{\"url\":\"\/assets\/uploads\/images\/2015\/05\/xrouting_context_settings_en.png\",\"title\":\"\",\"size\":\"141444\",\"extension\":\"png\",\"field\":4,\"settings\":{\"class\":\"none\",\"style\":\"\"}}]},\"settings\":{\"layout_attributes\":\"\",\"layout_padding_top\":\" \",\"layout_padding_bottom\":\" \",\"layout_classes\":\"\",\"col1_classes\":\"small-12\"},\"parent\":0},{\"layout\":3,\"content\":{\"col1\":[{\"value\":\"<p>Your context settings for the english context should look similar to those in the image above.&nbsp;Your context settings for your French and German context would be similar, besides that the <em>base_url,<\/em>&nbsp;<em>site_url<\/em>&nbsp;and <em>cultureKey<\/em>&nbsp;should reflect the different language string and your <em>site_start<\/em> would be the ID of the homepage resource in that context.<\/p><p><strong>One important thing is that all your <em>http_host<\/em> settings must not include \\\"www.\\\"!<\/strong> Otherwise XRouting won''t find the correct context when it''s comparing the hosts. But no worries, XRouting handels the www subdomain automatically.<\/p><p>If you have already installed XRouting and open your website at http:\/\/company.org\/en\/ you should already see the English homepage.<\/p>\",\"field\":2,\"settings\":[]},{\"value\":\"What you also need\",\"level\":\"h2\",\"field\":3,\"settings\":[]},{\"value\":\"<p>In order to finish your multilingual website you might want to redirect your visitors from the main domain company.org to a specific language version. This could be done by a&nbsp;<a href=\\\"https:\/\/gist.github.com\/christianseel\/504302ce8ddfcde009c0\\\" target=\\\"_blank\\\">snippet<\/a> in the resource in the web context, that automatically redirects the user based on it''s browser language or by a simple weblink that is set as the global <em>site_start<\/em> in the web&nbsp;context and that redirects to the default language.<\/p><p>In order to let visitors switch between languages I recommend the&nbsp;<a href=\\\"http:\/\/modx.com\/extras\/package\/babel\\\" target=\\\"_blank\\\">Babel<\/a> extra, which is just about to reach the 3.0 version. With Babel you can link your translations from the MODX Manager and with a simple snippet in your template you can add the links to the other languages to the front-end. This is how the Babel snippet call could look like:<\/p>\",\"field\":2,\"settings\":[]},{\"value\":\"[[BabelLinks?\\n    &tpl=`babelLanguageTabs`\\n    &showCurrent=`1`\\n    &includeUnlinked=`1`\\n]]\",\"lang\":\"html\",\"field\":10,\"settings\":[]},{\"value\":\"Got issues?\",\"level\":\"h3\",\"field\":3,\"settings\":[]},{\"value\":\"<p>XRouting can be found on&nbsp;<a href=\\\"https:\/\/github.com\/chsmedien\/XRouting\\\" target=\\\"_blank\\\">Github<\/a>, where you can also open&nbsp;<a href=\\\"https:\/\/github.com\/chsmedien\/XRouting\/issues\\\" target=\\\"_blank\\\">issues<\/a> if you have any problems or you can contribute by opening a pull request.<\/p>\",\"field\":2,\"settings\":[]}]},\"settings\":[],\"parent\":0}]","linear":[{"value":"<p><a href=\"http:\/\/modx.com\/extras\/package\/xrouting\" target=\"_blank\">XRouting<\/a> is a simple plugin that handles requests for different contexts in MODX. It automatically switches the context based on a (sub)domain or subfolder.&nbsp;<a href=\"http:\/\/modx.com\/extras\/package\/contextrouter\" target=\"_blank\">ContextRouter<\/a> or&nbsp;<a href=\"http:\/\/modx.com\/extras\/package\/gatewaymanager\" target=\"_blank\">GatewayManager<\/a> are similar extras, but neither of them can handle the&nbsp;routing based on domains and folders at the same time.&nbsp;In this tutorial you''ll learn how you can setup XRouting for&nbsp;a multilingual website with subfolders for each language.<\/p><p>XRouting is available for free and&nbsp;can be installed through the MODX Package Management or downloaded&nbsp;<a href=\"http:\/\/modx.com\/extras\/package\/xrouting\" target=\"_blank\">here<\/a>.<\/p>","field":2,"settings":[]},{"value":"How XRouting works\t","level":"h2","field":3,"settings":[]},{"value":"<p>XRouting uses context settings for it''s routing. That''s why you should add at least the <em>http_host<\/em>, <em>base_url<\/em> and <em>site_url<\/em> context settings to each context. To make your multilingual website actually work you should also add context&nbsp;settings like <em>cultureKey<\/em>, <em>site_start<\/em> and <em>error_page<\/em>.<\/p>","field":2,"settings":[]},{"value":"<p>Assuming that you''re creating a website that is translated into English, French and German, with a single domain and a subfolder for each language \u2013 so the English website would be available under http:\/\/company.org\/en\/. In that case you should leave the default web context and create a new context for each language.<\/p><p>Please make sure that each context contains at least 1 Resource that is set as <em>site_start<\/em> in the context settings.<\/p><p>At this point your resource tree should look similar to the one in this image.<\/p>","field":2,"settings":[]},{"url":"\/assets\/uploads\/images\/2015\/05\/xrouting_tree.png","title":"","size":"33562","extension":"png","field":4,"settings":{"class":"extended-width","style":"","classnames":"no-margin-top"}},{"value":"About the context settings","level":"h2","field":3,"settings":[]},{"value":"<p>To understand the context settings you should first make sure to know the anatomy of a URL. The image below shows which part is the protocol, the hostname and the path.<\/p>","field":2,"settings":[]},{"url":"\/assets\/uploads\/images\/2015\/05\/xrouting_url_anatomy.jpg","title":"","size":"6768","extension":"jpg","field":4,"settings":{"class":"none","classnames":"","style":"width:auto;","linked":"0"}},{"value":"<p>\n\tBased on this it''s pretty straight forward to set the MODX context settings for XRouting. The <em>http_host<\/em>&nbsp;setting&nbsp;is just the hostname (Important: when used with XRouting always remove the \"www.\" because it''s added automatically). The <em>base_url<\/em> setting is your base path of your website. For a normal project this would just be single slash. In the case of a multilingual website with subfolders for each language, it''s the name of the subfolder. Make sure your <em>base_path<\/em> settings starts and ends with a slash! The <em>site_url<\/em> setting in MODX is just the combination of the default&nbsp;protocol, the <em>http_host<\/em> setting and the <em>base_url<\/em> setting.<\/p>","field":2,"settings":[]},{"url":"\/assets\/uploads\/images\/2015\/05\/xrouting_context_settings_en.png","title":"","size":"141444","extension":"png","field":4,"settings":{"class":"none","style":""}},{"value":"<p>Your context settings for the english context should look similar to those in the image above.&nbsp;Your context settings for your French and German context would be similar, besides that the <em>base_url,<\/em>&nbsp;<em>site_url<\/em>&nbsp;and <em>cultureKey<\/em>&nbsp;should reflect the different language string and your <em>site_start<\/em> would be the ID of the homepage resource in that context.<\/p><p><strong>One important thing is that all your <em>http_host<\/em> settings must not include \"www.\"!<\/strong> Otherwise XRouting won''t find the correct context when it''s comparing the hosts. But no worries, XRouting handels the www subdomain automatically.<\/p><p>If you have already installed XRouting and open your website at http:\/\/company.org\/en\/ you should already see the English homepage.<\/p>","field":2,"settings":[]},{"value":"What you also need","level":"h2","field":3,"settings":[]},{"value":"<p>In order to finish your multilingual website you might want to redirect your visitors from the main domain company.org to a specific language version. This could be done by a&nbsp;<a href=\"https:\/\/gist.github.com\/christianseel\/504302ce8ddfcde009c0\" target=\"_blank\">snippet<\/a> in the resource in the web context, that automatically redirects the user based on it''s browser language or by a simple weblink that is set as the global <em>site_start<\/em> in the web&nbsp;context and that redirects to the default language.<\/p><p>In order to let visitors switch between languages I recommend the&nbsp;<a href=\"http:\/\/modx.com\/extras\/package\/babel\" target=\"_blank\">Babel<\/a> extra, which is just about to reach the 3.0 version. With Babel you can link your translations from the MODX Manager and with a simple snippet in your template you can add the links to the other languages to the front-end. This is how the Babel snippet call could look like:<\/p>","field":2,"settings":[]},{"value":"[[BabelLinks?\n    &tpl=`babelLanguageTabs`\n    &showCurrent=`1`\n    &includeUnlinked=`1`\n]]","lang":"html","field":10,"settings":[]},{"value":"Got issues?","level":"h3","field":3,"settings":[]},{"value":"<p>XRouting can be found on&nbsp;<a href=\"https:\/\/github.com\/chsmedien\/XRouting\" target=\"_blank\">Github<\/a>, where you can also open&nbsp;<a href=\"https:\/\/github.com\/chsmedien\/XRouting\/issues\" target=\"_blank\">issues<\/a> if you have any problems or you can contribute by opening a pull request.<\/p>","field":2,"settings":[]}],"fieldcounts":{"2":8,"3":4,"4":3,"10":1},"_isContentBlocks":true}}'
tvs:
    author: christianseel
    disqus_id: ''
    page_head: ''
    preview.image: images/2015/05/xrouting_context_settings_en.png

-----

<div class="row   " >
    <div class="[[++default_article_column_classnames]]">
        <p><a href="http://modx.com/extras/package/xrouting" target="_blank">XRouting</a> is a simple plugin that handles requests for different contexts in MODX. It automatically switches the context based on a (sub)domain or subfolder.&nbsp;<a href="http://modx.com/extras/package/contextrouter" target="_blank">ContextRouter</a> or&nbsp;<a href="http://modx.com/extras/package/gatewaymanager" target="_blank">GatewayManager</a> are similar extras, but neither of them can handle the&nbsp;routing based on domains and folders at the same time.&nbsp;In this tutorial you'll learn how you can setup XRouting for&nbsp;a multilingual website with subfolders for each language.</p><p>XRouting is available for free and&nbsp;can be installed through the MODX Package Management or downloaded&nbsp;<a href="http://modx.com/extras/package/xrouting" target="_blank">here</a>.</p>

<h2>How XRouting works	</h2>

<p>XRouting uses context settings for it's routing. That's why you should add at least the <em>http_host</em>, <em>base_url</em> and <em>site_url</em> context settings to each context. To make your multilingual website actually work you should also add context&nbsp;settings like <em>cultureKey</em>, <em>site_start</em> and <em>error_page</em>.</p>
    </div>
</div>

<div class="row     ">
    <div class="[[++default_article_column_classnames]] columns">
        <div class="row" >
            <div class="medium-6 small-12 medium-push-6 columns">
                <p>Assuming that you're creating a website that is translated into English, French and German, with a single domain and a subfolder for each language – so the English website would be available under http://company.org/en/. In that case you should leave the default web context and create a new context for each language.</p><p>Please make sure that each context contains at least 1 Resource that is set as <em>site_start</em> in the context settings.</p><p>At this point your resource tree should look similar to the one in this image.</p>
            </div>
            <div class="medium-6 small-12 medium-pull-6 columns">
                
<figure class="content-image extended-width no-margin-top">
    <img data-src="/assets/uploads/images/2015/05/xrouting_tree.png" class="lazyload" alt="" >
    
</figure>


            </div>
        </div>
    </div>
</div>

<div class="row   " >
    <div class="[[++default_article_column_classnames]]">
        <h2>About the context settings</h2>

<p>To understand the context settings you should first make sure to know the anatomy of a URL. The image below shows which part is the protocol, the hostname and the path.</p>


<figure class="content-image none ">
    <img data-src="/assets/uploads/images/2015/05/xrouting_url_anatomy.jpg" class="lazyload" alt="" style="width:auto;">
    
</figure>



<p>
	Based on this it's pretty straight forward to set the MODX context settings for XRouting. The <em>http_host</em>&nbsp;setting&nbsp;is just the hostname (Important: when used with XRouting always remove the "www." because it's added automatically). The <em>base_url</em> setting is your base path of your website. For a normal project this would just be single slash. In the case of a multilingual website with subfolders for each language, it's the name of the subfolder. Make sure your <em>base_path</em> settings starts and ends with a slash! The <em>site_url</em> setting in MODX is just the combination of the default&nbsp;protocol, the <em>http_host</em> setting and the <em>base_url</em> setting.</p>
    </div>
</div>

<div class="row     " >
    <div class="small-12">
        
<figure class="content-image none ">
    <img data-src="/assets/uploads/images/2015/05/xrouting_context_settings_en.png" class="lazyload" alt="" >
    
</figure>


    </div>
</div>

<div class="row   " >
    <div class="[[++default_article_column_classnames]]">
        <p>Your context settings for the english context should look similar to those in the image above.&nbsp;Your context settings for your French and German context would be similar, besides that the <em>base_url,</em>&nbsp;<em>site_url</em>&nbsp;and <em>cultureKey</em>&nbsp;should reflect the different language string and your <em>site_start</em> would be the ID of the homepage resource in that context.</p><p><strong>One important thing is that all your <em>http_host</em> settings must not include "www."!</strong> Otherwise XRouting won't find the correct context when it's comparing the hosts. But no worries, XRouting handels the www subdomain automatically.</p><p>If you have already installed XRouting and open your website at http://company.org/en/ you should already see the English homepage.</p>

<h2>What you also need</h2>

<p>In order to finish your multilingual website you might want to redirect your visitors from the main domain company.org to a specific language version. This could be done by a&nbsp;<a href="https://gist.github.com/christianseel/504302ce8ddfcde009c0" target="_blank">snippet</a> in the resource in the web context, that automatically redirects the user based on it's browser language or by a simple weblink that is set as the global <em>site_start</em> in the web&nbsp;context and that redirects to the default language.</p><p>In order to let visitors switch between languages I recommend the&nbsp;<a href="http://modx.com/extras/package/babel" target="_blank">Babel</a> extra, which is just about to reach the 3.0 version. With Babel you can link your translations from the MODX Manager and with a simple snippet in your template you can add the links to the other languages to the front-end. This is how the Babel snippet call could look like:</p>

<pre><code class="language-markup">&#91;&#91;BabelLinks?
    &amp;tpl=`babelLanguageTabs`
    &amp;showCurrent=`1`
    &amp;includeUnlinked=`1`
&#93;&#93;</code></pre>

<h3>Got issues?</h3>

<p>XRouting can be found on&nbsp;<a href="https://github.com/chsmedien/XRouting" target="_blank">Github</a>, where you can also open&nbsp;<a href="https://github.com/chsmedien/XRouting/issues" target="_blank">issues</a> if you have any problems or you can contribute by opening a pull request.</p>
    </div>
</div>