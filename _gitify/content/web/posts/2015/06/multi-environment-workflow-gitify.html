id: 179
pagetitle: 'Setting up a multi-environment workflow with Gitify'
alias: 2015/06/multi-environment-workflow-gitify
parent: 1
introtext: '<p>Gitify is a command line tool developed by the modmore team. It can help setting up a workflow solution for managing a MODX&nbsp;site across dev,&nbsp;staging and production environments. In this tutorial we''ll see how we can set up such a workflow.&nbsp;</p>'
template: 2
menuindex: 45
createdby: 2
uri: posts/2015/06/multi-environment-workflow-gitify
show_in_tree: 0
properties: '{"contentblocks":{"content":"[{\"layout\":3,\"content\":{\"col1\":[{\"value\":\"<p>Gitify is a command line tool developed by the modmore team. It can help setting up a workflow solution for managing a MODX site across dev, staging and production environments. In this tutorial we''ll see how we can set up such a workflow.<\/p>\",\"field\":2,\"settings\":[]},{\"value\":\"What is Gitify?\",\"level\":\"h2\",\"field\":3,\"settings\":[]},{\"value\":\"<p>Gitify is a command line tool. It''s free, and available from&nbsp;<a href=\\\"https:\/\/github.com\/modmore\/Gitify\\\" target=\\\"_blank\\\">modmore\/Gitify on Github<\/a>.&nbsp;Its purpose is to make it easier to manage a complete&nbsp;MODX site in a git repository. This way, you will no longer have to worry about what is in the MODX database when migrating from one environment (like a localhost) to another (like your production server). Instead&nbsp;your git repository will serve as the \\\"master database\\\", containing all the necessary information for a deployment.<\/p><p>The core functionality of Gitify revolves around two commands:<\/p><ul><li><code>Gitify extract<\/code><\/li><li><code>Gitify build<\/code><\/li><\/ul><p>These commands are used to manage a file representation of data that is stored on your filesystem. With Gitify extract, data is taken from your MODX database and written to file. With Gitify build, data is read from those files, and written to the MODX database.&nbsp;<\/p><p>With these two commands, and some automation, you can set up a fully functional workflow.<\/p>\",\"field\":2,\"settings\":[]},{\"value\":\"The different environments\",\"level\":\"h2\",\"field\":3,\"settings\":{}},{\"value\":\"<p>As you might know from our&nbsp;<a href=\\\"[[~3]]\\\">Building MODX.today<\/a> post, we use Gitify to develop and maintain&nbsp;MODX.today. In this post we''ll talk not just about the MODX.today workflow, but also a slightly more general one.&nbsp;<\/p><p>For MODX.today, we&nbsp;have 3&nbsp;distinct MODX.today environments.&nbsp;<\/p><p>The most important one, is the one you''re looking at right now:&nbsp;production. This one is (obviously)&nbsp;hosted on the domain <code>modx.today<\/code>, and is served from the <code>production<\/code> branch in the&nbsp;<a href=\\\"https:\/\/github.com\/modmore\/MODX.today\\\" target=\\\"_blank\\\">MODX.today repository on Github<\/a>. The production environment primarily exists to serve requests, but it''s not entirely read-only as we also have&nbsp;<a href=\\\"[[~144]]\\\" target=\\\"_blank\\\">Release Robot Robbie<\/a> and fix the occasional typo directly on production. For the rest of the post though, we''ll assume&nbsp;production environments being read only.&nbsp;<\/p><p>Secondly, we have a staging site on a different domain, but on the same server as the production site. This is used to share&nbsp;<a href=\\\"[[~7]]\\\">submitted articles<\/a> with the author to get the final approval before publishing, and also for testing changes before merging them into production. The staging site always runs off the <code>staging<\/code> branch, and is read-and-writeable to make sure we can make content changes directly where needed. These changes are then automatically pushed back to the <code>staging<\/code> branch.&nbsp;<\/p><p>Finally there are the development environments. These are run locally and based on the <code>develop<\/code> branch. This is where we do most of the actual content writing and editing, build out new features of the site, and merge changes into the <code>staging<\/code> or <code>production<\/code> branches to deploy them. And, as we''re just using a git repository and it''s easy to create a new branch, we sometimes have separate branches we can work with to not disturb the day-to-day changes on a large new feature.&nbsp;<\/p><p>Put into a diagram, here''s what the generic workflow might look like.&nbsp;<\/p>\",\"field\":2,\"settings\":{}},{\"url\":\"\/assets\/uploads\/images\/2015\/05\/gitify_workflow_diagram_2.png\",\"title\":\"Workflow diagram showing the different branches and environments. The localhost and staging.site.com environments can both read from and write to the branch on git, while site.com only reads the repository.\",\"size\":\"489102\",\"extension\":\"png\",\"field\":4,\"settings\":{}},{\"value\":\"<p>We''ll continue to refer to variations of the image included&nbsp;above to explain the actions and&nbsp;workflow&nbsp;per environment. But first, let''s set up a new Gitify project.&nbsp;<\/p>\",\"field\":2,\"settings\":{}},{\"value\":\"Setting up a Gitify Project\",\"level\":\"h2\",\"field\":3,\"settings\":{}},{\"value\":\"<p>To set up a Gitify project, you will obviously need to have Gitify installed.&nbsp;<a href=\\\"https:\/\/github.com\/modmore\/Gitify\/wiki\/1.-Installation\\\" target=\\\"_blank\\\">The full installation instructions are in the wiki<\/a>, so I wont repeat all that here. It''s not very hard though; just clone the repository to grab the files, run <code>composer install<\/code>&nbsp;&nbsp;to install the&nbsp;dependencies, and use <code>chmod +x Gitify<\/code> to make the primary Gitify file executable. After that, you''ll add that directory to your <code>$PATH<\/code>, so you can run the Gitify executable from any folder without needing to enter the full path.&nbsp;<\/p><p>Next, run Gitify init in your MODX root.&nbsp;<\/p>\",\"field\":2,\"settings\":{}},{\"value\":\"The Development Enviroment\",\"level\":\"h2\",\"field\":3,\"settings\":{}},{\"value\":\"<p>The development environments are run on a local webserver. These are meant for development of the site and as such, the workflow is automatic. While developing, you don''t want changes to be automatically committed or deployed, as they might not be ready.<\/p><p>For this environment, you will be manually working with the various Gitify commands&nbsp;<\/p>\",\"field\":2,\"settings\":{}}]},\"settings\":[],\"parent\":0}]","linear":[{"value":"<p>Gitify is a command line tool developed by the modmore team. It can help setting up a workflow solution for managing a MODX site across dev, staging and production environments. In this tutorial we''ll see how we can set up such a workflow.<\/p>","field":2,"settings":[]},{"value":"What is Gitify?","level":"h2","field":3,"settings":[]},{"value":"<p>Gitify is a command line tool. It''s free, and available from&nbsp;<a href=\"https:\/\/github.com\/modmore\/Gitify\" target=\"_blank\">modmore\/Gitify on Github<\/a>.&nbsp;Its purpose is to make it easier to manage a complete&nbsp;MODX site in a git repository. This way, you will no longer have to worry about what is in the MODX database when migrating from one environment (like a localhost) to another (like your production server). Instead&nbsp;your git repository will serve as the \"master database\", containing all the necessary information for a deployment.<\/p><p>The core functionality of Gitify revolves around two commands:<\/p><ul><li><code>Gitify extract<\/code><\/li><li><code>Gitify build<\/code><\/li><\/ul><p>These commands are used to manage a file representation of data that is stored on your filesystem. With Gitify extract, data is taken from your MODX database and written to file. With Gitify build, data is read from those files, and written to the MODX database.&nbsp;<\/p><p>With these two commands, and some automation, you can set up a fully functional workflow.<\/p>","field":2,"settings":[]},{"value":"The different environments","level":"h2","field":3,"settings":[]},{"value":"<p>As you might know from our&nbsp;<a href=\"[[~3]]\">Building MODX.today<\/a> post, we use Gitify to develop and maintain&nbsp;MODX.today. In this post we''ll talk not just about the MODX.today workflow, but also a slightly more general one.&nbsp;<\/p><p>For MODX.today, we&nbsp;have 3&nbsp;distinct MODX.today environments.&nbsp;<\/p><p>The most important one, is the one you''re looking at right now:&nbsp;production. This one is (obviously)&nbsp;hosted on the domain <code>modx.today<\/code>, and is served from the <code>production<\/code> branch in the&nbsp;<a href=\"https:\/\/github.com\/modmore\/MODX.today\" target=\"_blank\">MODX.today repository on Github<\/a>. The production environment primarily exists to serve requests, but it''s not entirely read-only as we also have&nbsp;<a href=\"[[~144]]\" target=\"_blank\">Release Robot Robbie<\/a> and fix the occasional typo directly on production. For the rest of the post though, we''ll assume&nbsp;production environments being read only.&nbsp;<\/p><p>Secondly, we have a staging site on a different domain, but on the same server as the production site. This is used to share&nbsp;<a href=\"[[~7]]\">submitted articles<\/a> with the author to get the final approval before publishing, and also for testing changes before merging them into production. The staging site always runs off the <code>staging<\/code> branch, and is read-and-writeable to make sure we can make content changes directly where needed. These changes are then automatically pushed back to the <code>staging<\/code> branch.&nbsp;<\/p><p>Finally there are the development environments. These are run locally and based on the <code>develop<\/code> branch. This is where we do most of the actual content writing and editing, build out new features of the site, and merge changes into the <code>staging<\/code> or <code>production<\/code> branches to deploy them. And, as we''re just using a git repository and it''s easy to create a new branch, we sometimes have separate branches we can work with to not disturb the day-to-day changes on a large new feature.&nbsp;<\/p><p>Put into a diagram, here''s what the generic workflow might look like.&nbsp;<\/p>","field":2,"settings":[]},{"url":"\/assets\/uploads\/images\/2015\/05\/gitify_workflow_diagram_2.png","title":"Workflow diagram showing the different branches and environments. The localhost and staging.site.com environments can both read from and write to the branch on git, while site.com only reads the repository.","size":"489102","extension":"png","field":4,"settings":[]},{"value":"<p>We''ll continue to refer to variations of the image included&nbsp;above to explain the actions and&nbsp;workflow&nbsp;per environment. But first, let''s set up a new Gitify project.&nbsp;<\/p>","field":2,"settings":[]},{"value":"Setting up a Gitify Project","level":"h2","field":3,"settings":[]},{"value":"<p>To set up a Gitify project, you will obviously need to have Gitify installed.&nbsp;<a href=\"https:\/\/github.com\/modmore\/Gitify\/wiki\/1.-Installation\" target=\"_blank\">The full installation instructions are in the wiki<\/a>, so I wont repeat all that here. It''s not very hard though; just clone the repository to grab the files, run <code>composer install<\/code>&nbsp;&nbsp;to install the&nbsp;dependencies, and use <code>chmod +x Gitify<\/code> to make the primary Gitify file executable. After that, you''ll add that directory to your <code>$PATH<\/code>, so you can run the Gitify executable from any folder without needing to enter the full path.&nbsp;<\/p><p>Next, run Gitify init in your MODX root.&nbsp;<\/p>","field":2,"settings":[]},{"value":"The Development Enviroment","level":"h2","field":3,"settings":[]},{"value":"<p>The development environments are run on a local webserver. These are meant for development of the site and as such, the workflow is automatic. While developing, you don''t want changes to be automatically committed or deployed, as they might not be ready.<\/p><p>For this environment, you will be manually working with the various Gitify commands&nbsp;<\/p>","field":2,"settings":[]}],"fieldcounts":{"2":6,"3":4,"4":1},"_isContentBlocks":true}}'
tvs:
    author: markhamstra
    disqus_id: ''
    page_head: ''
    preview.image: ''

-----

<div class="row   " >
    <div class="[[++default_article_column_classnames]]">
        <p>Gitify is a command line tool developed by the modmore team. It can help setting up a workflow solution for managing a MODX site across dev, staging and production environments. In this tutorial we'll see how we can set up such a workflow.</p>

<h2>What is Gitify?</h2>

<p>Gitify is a command line tool. It's free, and available from&nbsp;<a href="https://github.com/modmore/Gitify" target="_blank">modmore/Gitify on Github</a>.&nbsp;Its purpose is to make it easier to manage a complete&nbsp;MODX site in a git repository. This way, you will no longer have to worry about what is in the MODX database when migrating from one environment (like a localhost) to another (like your production server). Instead&nbsp;your git repository will serve as the "master database", containing all the necessary information for a deployment.</p><p>The core functionality of Gitify revolves around two commands:</p><ul><li><code>Gitify extract</code></li><li><code>Gitify build</code></li></ul><p>These commands are used to manage a file representation of data that is stored on your filesystem. With Gitify extract, data is taken from your MODX database and written to file. With Gitify build, data is read from those files, and written to the MODX database.&nbsp;</p><p>With these two commands, and some automation, you can set up a fully functional workflow.</p>

<h2>The different environments</h2>

<p>As you might know from our&nbsp;<a href="[[~3]]">Building MODX.today</a> post, we use Gitify to develop and maintain&nbsp;MODX.today. In this post we'll talk not just about the MODX.today workflow, but also a slightly more general one.&nbsp;</p><p>For MODX.today, we&nbsp;have 3&nbsp;distinct MODX.today environments.&nbsp;</p><p>The most important one, is the one you're looking at right now:&nbsp;production. This one is (obviously)&nbsp;hosted on the domain <code>modx.today</code>, and is served from the <code>production</code> branch in the&nbsp;<a href="https://github.com/modmore/MODX.today" target="_blank">MODX.today repository on Github</a>. The production environment primarily exists to serve requests, but it's not entirely read-only as we also have&nbsp;<a href="[[~144]]" target="_blank">Release Robot Robbie</a> and fix the occasional typo directly on production. For the rest of the post though, we'll assume&nbsp;production environments being read only.&nbsp;</p><p>Secondly, we have a staging site on a different domain, but on the same server as the production site. This is used to share&nbsp;<a href="[[~7]]">submitted articles</a> with the author to get the final approval before publishing, and also for testing changes before merging them into production. The staging site always runs off the <code>staging</code> branch, and is read-and-writeable to make sure we can make content changes directly where needed. These changes are then automatically pushed back to the <code>staging</code> branch.&nbsp;</p><p>Finally there are the development environments. These are run locally and based on the <code>develop</code> branch. This is where we do most of the actual content writing and editing, build out new features of the site, and merge changes into the <code>staging</code> or <code>production</code> branches to deploy them. And, as we're just using a git repository and it's easy to create a new branch, we sometimes have separate branches we can work with to not disturb the day-to-day changes on a large new feature.&nbsp;</p><p>Put into a diagram, here's what the generic workflow might look like.&nbsp;</p>


<figure class="content-image extended-width ">
    <img data-src="/assets/uploads/images/2015/05/gitify_workflow_diagram_2.png" class="lazyload" alt="Workflow diagram showing the different branches and environments. The localhost and staging.site.com environments can both read from and write to the branch on git, while site.com only reads the repository." >
    <figcaption>Workflow diagram showing the different branches and environments. The localhost and staging.site.com environments can both read from and write to the branch on git, while site.com only reads the repository.</figcaption>
</figure>



<p>We'll continue to refer to variations of the image included&nbsp;above to explain the actions and&nbsp;workflow&nbsp;per environment. But first, let's set up a new Gitify project.&nbsp;</p>

<h2>Setting up a Gitify Project</h2>

<p>To set up a Gitify project, you will obviously need to have Gitify installed.&nbsp;<a href="https://github.com/modmore/Gitify/wiki/1.-Installation" target="_blank">The full installation instructions are in the wiki</a>, so I wont repeat all that here. It's not very hard though; just clone the repository to grab the files, run <code>composer install</code>&nbsp;&nbsp;to install the&nbsp;dependencies, and use <code>chmod +x Gitify</code> to make the primary Gitify file executable. After that, you'll add that directory to your <code>$PATH</code>, so you can run the Gitify executable from any folder without needing to enter the full path.&nbsp;</p><p>Next, run Gitify init in your MODX root.&nbsp;</p>

<h2>The Development Enviroment</h2>

<p>The development environments are run on a local webserver. These are meant for development of the site and as such, the workflow is automatic. While developing, you don't want changes to be automatically committed or deployed, as they might not be ready.</p><p>For this environment, you will be manually working with the various Gitify commands&nbsp;</p>
    </div>
</div>