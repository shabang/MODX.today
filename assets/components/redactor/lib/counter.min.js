if(!RedactorPlugins)var RedactorPlugins={};!function(a){a.fn.animateRotate=function(b,c,d,e,f){var g=a.speed(c,d,f),h=g.step;return this.each(function(c,d){g.complete=a.proxy(g.complete,d),g.step=function(b){return a.style(d,"transform","rotate("+b+"deg)"),h?h.apply(d,arguments):void 0},a({deg:e}).animate({deg:b},g)})},RedactorPlugins.counter=function(){return{init:function(){function b(b){var d=0,e=0,f=0,g=b.code.get(),h=g.replace(/<\/(.*?)>/gi," ");if(h=h.replace(/<(.*?)>/gi,""),h=h.replace(/\t/gi,""),h=h.replace(/\n/gi,""),h=h.replace(/\r/gi,""),h=a.trim(h),""!==h){var i=h.split(/\s+/),j=h.match(/\s/g);i&&(d=i.length),j&&(f=j.length),e=h.length}var k=b.opts.counterWPM||275,l=a(b.$editor).text().trim().split(/\s+/g).length,m=k/60,n=l/m,o=c(1e3*n),p="Estimated Read Time: ";o.hours&&(p+=o.hours.toString()+" "+(o.hours>1?"Hours ":"Hour ")),p+=o.minutes.toString()+" "+(o.minutes>1?"Minutes ":"Minute "),p+=o.seconds.toString()+" "+(o.seconds>1?"Seconds ":"Second ");var q=a(b.$editor).parent().children(".redactor_counter");q.find(".reading-time").text((o.hours?o.hours+":":"")+(o.minutes.toString().length<2?"0"+o.minutes.toString():o.minutes)+":"+(o.seconds.toString().length<2?"0"+o.seconds.toString():o.seconds)).parent().attr("title",p),q.find(".word-count").text(l.toLocaleString()+" words").parent().attr("title",e.toLocaleString()+" characters ("+Number(e-f).toLocaleString()+" non-space)");var r=n/3600*360;q.find(".icon-power-off").data("deg",r).animateRotate(r,180,"linear",q.find(".icon-power-off").data("deg"))}function c(a){var b,c,d,e,f;return b=a/1e3,c=Math.round(b%60),b/=60,d=Math.round(b%60),b/=60,e=Math.round(b%24),b/=24,f=Math.round(b),{days:f,hours:e,minutes:d,seconds:c}}a(this.$editor).after('<p class="redactor_counter" id="redactor_counter-'+this.uuid+'"><span class="time-wrap"><i class="icon icon-power-off"></i>&nbsp;<span class="reading-time"></span></span>&emsp;&emsp;<span class="word-count-wrap"><i class="icon icon-keyboard-o"></i>&nbsp;<span class="word-count"></span></span></p>');var d=a("#redactor_counter-"+this.uuid);this.$editor.on("keyup.redactor-limiter",a.proxy(function(){b(this)},this));var e=this;this.$element.on("sourceCallback",function(){e.opts.visual?d.show():d.hide()}),b(this)}}}}(jQuery);